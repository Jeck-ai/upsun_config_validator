applications:
    frontend:
        type: nodejs:20
        hooks:
            build: |
                npm install
                npm run build
        web:
            commands:
                start: npm run serve
    backend:
        type: nodejs:20
        hooks:
            build: |
                npm install
        web:
            commands:
                start: npm run api

services:
    db:
        type: mongodb-enterprise:5.0
    cache:
        type: redis:7.0

routes:
    "https://{default}/":
        type: upstream
        upstream: "frontend"
    "https://{default}/api":
        type: upstream
        upstream: "backend" 