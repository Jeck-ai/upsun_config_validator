applications:
  frontend:
    type: 'nodejs@16'
    web:
      commands:
        start: npm start
      locations:
        '/':
          root: 'public'
          passthru: true
          index:
            - index.html
  backend:
    type: 'nodejs@16'
    web:
      commands:
        start: node server.js
      locations:
        '/api':
          passthru: true

services:
  db:
    type: mongodb:5.0

routes:
  "https://{default}/":
    type: upstream
    upstream: "frontend:http"
  "https://{default}/api":
    type: upstream
    upstream: "backend:http"